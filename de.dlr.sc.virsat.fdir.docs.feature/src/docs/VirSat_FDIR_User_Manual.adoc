= Virtual Satellite 4 FDIR: User Manual
:imagesdir: images
:title-logo-image: images/title/VirtualSatellite_Modelling_4k.jpg
:toc:
:toclevels: 3
:experimental:  
:sectnums:

== What is Virtual Satellite 4 FDIR?

This user manual describes how to use the Software Virtual Satellite 4 FDIR (VirSat4 FDIR).
The software is an extension to Virtual Satellite 4 CORE, for a guide on how to use Virtual Satellite in general,
please refer to the Virtual Satellite 4 CORE Manual.

== Purpose

VirSat4 FDIR focuses on modeling Fault Detection, Isolation, and Recovery.
This includes among others: 
Models on failure behavior, recovery behavior, detection behavior, analysis results, and more.
The main purpose of VirSat4 FDIR is to enable the analysis of FDIR concepts by means of 
mathematically well founded evaluation.

The software primarily follows the ESA ECSS standards by means of the 
SAVOIR FDIR Handbook (http://savoir.estec.esa.int/SAVOIRDocuments.htm).
For clarification on vocabulary, further details on FDIR analysis and process, please
check the SAVOIR FDIR Handbook.
Accessing the handbook requires registration / login.
Please note that this in return is restricted to ESA member states.

== Getting Started

=== Modeling Workflow

Learn in this section about the recommended workflow for approaching FDIR modeling & analysis.
The workflow for creating fault models is up to the preference of the users.
Nevertheless, basing the workflow on the following steps is recommended:

* Create a system model using the product structures concepts (PS Concept).
For details check the Virtual Satellite 4 CORE User Manual.
* Create a SubSystem dedicated to Risk / FDIR.
* Create a list of Feared Events in this sub system and assign severity categories to them.
* Create a list of faults, with their basic events, for each equipment.
* Perform a Fault Tree Analysis to determine the fault propagations.
* Create the FDIRParameters category at the top of your system model and configure it.
* Create FDIR analysis categories for the desired faults
* Refine the system model and the Fault Tree Analysis and update the FDIR analysis

In the following sections, the various categories, means of analysis, etc. will be elaborated.

== Fault Modeling

Fault modeling forms the core of VirSat4 FDIR and is the primary activity required to perform any FDIR analysis.
Learn in this section how to use the graphical editor to perform the main analysis of VirSat4 FDIR,
Fault Tree Analysis (FTA), and how to use it to build up fault models.

=== Modeling Fault Trees

Faults, their propagations, and inhibiting fault propagation through means of FDIR is modeled using fault trees.
Fault trees are graphical models describing how faults combine with each other, 
propagate through the system, and eventually turn into a feared event.
A fault tree is usually constructed top-down, but is read bottom-up, starting with initiating basic events.
The recombination of faults is modeled via so-called gates, such as "AND" and "OR".
In this section, you will learn the basics on fault tree analysis, which gates are supported by the software,
and how to use the graphical editor to create a fault tree.
For further in-depth information on how to perform an FTA, we refer to the standards.

==== Fault Tree Elements

The following contains a comprehensive list of fault tree elements supported by VirSat FDIR.
The element descriptions are structured in the following format:

_[Name of the fault tree element]_ [Icon]::
-- Graphical representation:::
 [Representation in the graphical editor]
-- Description:::
 [Purpose of the element, its propagation behavior, additional parameters, etc.]

In addition to its inherent parameters, each fault tree node also has a name, a list of inputs, and a list of outputs.
For gates, the name is by default the type of the node.

:node-type: Fault
_{node-type}_ image:faultTrees/{node-type}.png[{node-type} icon]::
-- Description:::
Faults represent logical, named events. 
They are used either to represent a _top-level event_ of a fault tree or an _intermediate event_. 
Faults are also the logical containers for all other fault tree elements. 
As such, deleting a fault also deletes all contained elements such as gates, propagations, analysis information, etc.
A fault always propagates if at least one input fails.
It is, however, recommended to only have one input per fault (plus basic events).
-- Graphical representation:::
image:faultTrees/{node-type}_Diagram.png[Representation in graphical editor]

:node-type: BasicEvent
_{node-type}_ image:faultTrees/{node-type}.png[{node-type} icon]::
-- Description:::
Basic events typically form the leaf elements of a fault tree.
They represent basic anomalies that are not further broken down in the course of the fault tree analysis.
In practice, basic events most commonly correspond to causes of equipment failure.
A basic event is always directly associated to a fault.
All fault propagations in a fault tree ultimately originate from basic events.
Ideally, a basic event is equipped with a failure rate, quantifying its likelihood of occurrence over time.
The failure rate states how often the basic event is expected to occur within a time unit.
Optionally, it may also be equipped with a repair rate which conversely captures the likelihood of repair over time.
Finally, a basic event may also be equipped with a cold failure rate, which comes into play when interacting together with the SPARE gate.
-- Graphical representation:::
image:faultTrees/{node-type}_Diagram.png[Representation in graphical editor]

:node-type: Propagation
_{node-type}_ image:faultTrees/{node-type}.png[{node-type} icon]::  
-- Description:::
Fault propagations are the edges of a fault tree, and connect the fault tree nodes.
A fault propagation has a direction.
It connects the output of a fault tree node with the input of another fault tree node. 
Since fault trees are acyclic graphs, fault propagations may not create any cycles. 
-- Graphical representation:::
image:faultTrees/{node-type}_Diagram.png[Representation in graphical editor]

:node-type: AND
_{node-type}_ image:faultTrees/{node-type}.png[{node-type} icon]::  
-- Description:::
A gate that propagates if all inputs have failed.
-- Graphical representation:::
image:faultTrees/{node-type}_Diagram.png[Representation in graphical editor]

:node-type: OR
_{node-type}_ image:faultTrees/{node-type}.png[{node-type} icon]::  
-- Description:::
A gate that propagates if at least one input has failed.
-- Graphical representation:::
image:faultTrees/{node-type}_Diagram.png[Representation in graphical editor]

:node-type: VOTE
_{node-type}_ image:faultTrees/{node-type}.png[{node-type} icon]::  
-- Description:::
A gate, that is also equipped with a voting threshold k, and propagates if at least k inputs have failed.
The voting threshold has to be at least 1.
-- Graphical representation:::
image:faultTrees/{node-type}_Diagram.png[Representation in graphical editor]

:node-type: SPARE
_{node-type}_ image:faultTrees/{node-type}.png[{node-type} icon]::  
-- Description:::
A gate with two types on inputs: Primaries and spares.
If at least one primary input fails, the SPARE gate activates and claims one of the spares.
Should no spares be available or failed, then the SPARE gate propagates.
All spares are considered to be dormant.
This means that contained basic events will use their cold failure rate, instead of their hot failure rate, as long as they are unclaimed.
Once a spare is claimed, it is set to be activated and its hot failure rate is used again.
Spares are claimed from left to right.
In the case of a repair, the SPARE gate switches back.
Spares may be shared between spare gates.
However, there must not be common nodes between spares or between spares and primaries.
The only exception of this rule, are functional dependency gates.
-- Graphical representation:::
image:faultTrees/{node-type}_Diagram.png[Representation in graphical editor]

:node-type: POR
_{node-type}_ image:faultTrees/{node-type}.png[{node-type} icon]::  
-- Description:::
A Priority OR (POR) gate propagates if the left-most input occurs before any other input.
-- Graphical representation:::
image:faultTrees/{node-type}_Diagram.png[Representation in graphical editor]

:node-type: PORI
_{node-type}_ image:faultTrees/{node-type}.png[{node-type} icon]::  
-- Description:::
An Inclusive Priority OR (PORI) gate propagates if the left-most input occurs before any other input,
or at the same time as another input. 
-- Graphical representation:::
image:faultTrees/{node-type}_Diagram.png[Representation in graphical editor]

:node-type: PAND
_{node-type}_ image:faultTrees/{node-type}.png[{node-type} icon]::  
-- Description:::
A Priority AND (PAND) gate propagates if the inputs fail exactly in sequence from left to right.
-- Graphical representation:::
image:faultTrees/{node-type}_Diagram.png[Representation in graphical editor]

:node-type: PANDI
_{node-type}_ image:faultTrees/{node-type}.png[{node-type} icon]::  
-- Description:::
An Inclusive Priority AND (PANDI) gate propagates if the inputs fail exactly in sequence from left to right,
or at the same time.
-- Graphical representation:::
image:faultTrees/{node-type}_Diagram.png[Representation in graphical editor]

:node-type: SAND
_{node-type}_ image:faultTrees/{node-type}.png[{node-type} icon]::  
-- Description:::
A Simultaneous AND (SAND) gate propagates if all inputs fail at the same time.
-- Graphical representation:::
image:faultTrees/{node-type}_Diagram.png[Representation in graphical editor]

:node-type: FDEP
_{node-type}_ image:faultTrees/{node-type}.png[{node-type} icon]::  
-- Description:::
The functional dependency (FDEP) gate allows to trigger basic events.
In the event of any input event occurring, all connected basic events get triggered.
-- Graphical representation:::
image:faultTrees/{node-type}_Diagram.png[Representation in graphical editor]

:node-type: RDEP
_{node-type}_ image:faultTrees/{node-type}.png[{node-type} icon]::  
-- Description:::
The rate dependency (RDEP) gate allows to increase the failure rate of a basic event.
An RDEP is equipped with a rate change parameter r.
In the event of any input event occurring, the failure rate of all connected basic events is multiplied by r.
-- Graphical representation:::
image:faultTrees/{node-type}_Diagram.png[Representation in graphical editor]

:node-type: PDEP
_{node-type}_ image:faultTrees/{node-type}.png[{node-type} icon]::  
-- Graphical representation:::
image:faultTrees/{node-type}_Diagram.png[Representation in graphical editor]
-- Description:::
The probability dependency (PDEP) gate allows to trigger basic events.
The PDEP gate is equipped with a trigger probability p.
In the event of any input event occurring, each connected basic event is triggered with probability p.

:node-type: DELAY
_{node-type}_ image:faultTrees/{node-type}.png[{node-type} icon]::  
-- Description:::
The DELAY gate can be used to describe time delays in propagation.
The gate is equipped with a delay parameter d.
Propagation occurs if any input fails and remains failed for a duration of d time units.
If the failed inputs are repaired before the DELAY gate perfoms a propagation, then the propagation process is stopped.
-- Graphical representation:::
image:faultTrees/{node-type}_Diagram.png[Representation in graphical editor]

:node-type: MONITOR
_{node-type}_ image:faultTrees/{node-type}.png[{node-type} icon]::  
-- Description:::
The MONITOR gate is used in fault trees where not all events are observable.
If a monitor gate is used, the semantics of fault occurrence are changed as follows:
By default, the observation of a basic event or any further propagated gate, is not guaranteed.
In order for it to be observed it must propagate to an observation input of a MONITOR gate.
A MONITOR gate has two types of inputs: Fail inputs and observation inputs.
Fail inputs work as usual, in the event of any fail input occurring, the MONITOR gate fails as well and propagates.
Failed MONITOR gates may no longer perform any observations.
In the case of an observation input occurring, the event is marked as observed.
Only then can reactive gates such as SPARE gates react and claim a spare.
The recovery actions in partial observable fault trees are managed by recovery automata.
A MONITOR gate may also be equipped with an observation rate o.
In the event of it being 0, all observation events are observed immediately.
If the observation rate is non-zero, all observation events are observed with time delay o.
-- Graphical representation:::
image:faultTrees/{node-type}_Diagram.png[Representation in graphical editor]

==== The graphical Fault Tree Editor

Besides the usual table based user interface, VirSat FDIR offers a graphical diagram editor interface.
Learn in this section how to create new fault tree diagrams and how to use them for building fault tree models.
Fault tree diagrams can also be used to simply visualize existing fault tree models.

===== Creating a new Fault Tree Diagram

Each fault tree diagram is associated with a fault.
The fault locally constitutes a top-level event.
Note that on a system wide level, the fault might be just an intermediate event.
A diagram may also contain multiple top-level events, but it is not recommended, as all elements inserted into a fault tree diagram
are automatically associated with the corresponding fault corresponding to the diagram.

A new diagram can be created by selecting a fault in the navigator and then choosing menu:Context[Open Diagram Editor].
A new editor window named according to the UUID of the selected fault will pop up and also automatically contain the selected fault. 
The diagram editor can be opened again using the same process.
The file of the newly created diagram can be found in the _documents_ folder of the structural element instance the fault is attached to.

[#OpenEditor]
image::faultTrees/openDiagramEditor.png[Opening the diagram editor, align="center"]

===== Basic Usage

The diagram editor is based on the same technology as other Virtual Satellite diagrams.
Previous experience with Virtual Satellite diagram editors should at least partially translate.
The diagram editor consists of two main areas shown in the figure below:
The actual modeling canvas (left-hand side) and the modeling palette (right-hand side).

[#DiagramEditor]
image::faultTrees/diagramEditor.png[Diagram Editor, align="center"]

===== Using the Auto Layout functionality

=== Modeling Detection

=== Data exchange with the GALILEO Format

== Recovery Modeling

=== Modeling Recovery Automata

==== Recovery Automata

==== The graphical Recovery Automaton Editor

===== Creating a new Recovery Automaton Diagram

===== Basic Usage

===== Using the Auto Layout functionality

== FDIR Analysis

=== Configuring Analysis information

=== Qualitative Analysis

=== Quantitative Analysis

=== Using STORM

== FDIR Reporting

=== Using the SAVOIR/FDIR Report Template

=== Excel Exports

== FDIR Synthesis

=== Fault Tree Generation

=== Recovery Automata Synthesis

[colophone]
== Legal - License & Copyright

|===
| Product Version:      | {revnumber}
| Build Date Qualifier: | {revdate}
| Travis CI Job Number: | {buildnr}
|=== 

Copyright (c) 2008-2020 DLR (German Aerospace Center),
Simulation and Software Technology.
Lilienthalplatz 7, 38108 Braunschweig, Germany

This program and the accompanying materials are made available under the terms of the Eclipse Public License 2.0 which is available at https://www.eclipse.org/legal/epl-2.0/ . A copy of the license is shipped with the Virtual Satellite software product.
